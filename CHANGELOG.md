# 更新日志

所有重要的项目更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 新增
- 暂无

### 修复
- 暂无

## [4.1.7] - 2025-12-09

### 新增
- 创建root版本Docker镜像（`leowinfy/10mins:root`），彻底解决NAS权限问题
- 添加版本管理API端点 `/api/version`
- 添加自动部署脚本（deploy-nas.sh）支持自动检测UID/GID
- 创建极空间NAS图形界面部署指南

### 优化
- README.md结构重组，减少39%的篇幅
- 清理所有重复内容，文档更清晰易读
- 改进启动脚本权限处理，遇到权限问题不再退出
- 添加权限自动修复机制（chmod 666）
- 增强错误处理和日志记录

### 修复
- 修复极空间NAS无限重启问题
- 修复Docker Desktop ES模块错误（将start.js重命名为start.cjs）
- 解决package.json中"type": "module"导致的模块系统冲突
- 确保在Docker Desktop和极空间NAS上都能正常运行

### 移除
- 删除无用的配置文件：
  - docker-compose.nas-entrypoint.yml
  - docker-compose.nas-flexible.yml
  - docker-compose.nas.yml
  - fix-permissions.sh
  - src/lib/db-nas.ts

## [4.1.6] - 2025-12-09

### 修复
- 修复Docker Desktop ES模块错误
- 将启动脚本从start.js重命名为start.cjs
- 解决package.json中"type": "module"导致的模块系统冲突

## [4.1.5] - 2025-12-09

### 新增
- 实现容器与宿主机UID/GID匹配机制（默认1000:1000）
- 创建《32 UID权限问题终极解决方案.md》文档
- 更新docker-compose.nas.yml配置文件

### 优化
- 简化Docker启动流程，移除外部entrypoint依赖
- 优化Docker镜像构建，支持自定义UID/GID参数

### 修复
- 解决极空间NAS UID权限问题
- 修复Docker Desktop兼容性问题

## [4.1.0] - 2025-12-09

### 新增
- 添加完整的版本管理系统
- 在Docker镜像中集成版本和作者信息
- 创建版本API端点 `/api/version`

### 优化
- 优化健康检查API，添加版本信息
- 更新页脚组件，显示版本和作者信息
- 修复极空间NAS等特殊环境的权限问题
- 添加Docker初始化脚本自动处理权限

## [4.0.1] - 2025-12-09

### 修复
- 修复编辑器快速插入按钮导致自动退出的问题
- 优化内容插入逻辑，使用 insertValue 替代 setValue
- 改进事件处理，阻止事件冒泡
- 确保插入内容后编辑器保持焦点

## [4.0.0] - 2025-12-09

### 新增
- 品牌升级：从"我的日记"升级为"每天十分钟"
- 新增5种精美主题配色方案：
  - 🌿 清新绿 - 自然清新，适合日常记录
  - 🌊 海洋蓝 - 宁静深邃，适合深度思考
  - 🌅 落日橙 - 温暖活力，适合快乐时刻
  - 🦋 优雅紫 - 高贵典雅，适合特殊纪念
  - 🌙 暗夜模式 - 护眼模式，适合夜间写作
- 实现主题持久化存储，自动记住用户选择

### 优化
- 优化首页设计，突出"十分钟"核心概念
- 改进记录预览可读性，保留换行格式
- 优化所有主题下的视觉体验和可用性

### 修复
- 修复暗色模式下的文字对比度问题
- 解决服务端渲染水合错误

## [3.0.0] - 2025-12-09

### 新增
- 集成 Vditor 3.11.2 作为主要 Markdown 编辑器
- 支持即时渲染（IR）模式，提供所见即所得的编辑体验
- 新增编辑/预览模式一键切换功能
- 支持数学公式、图表、流程图等高级 Markdown 功能
- 内置大纲导航和全文搜索功能
- 支持多种内容主题切换（微信、Light、Dark、Ant Design等）
- 添加快速插入工具栏，提升编辑效率

### 优化
- 优化图片上传体验，支持拖拽、粘贴等多种方式
- 更新内容渲染组件，使用 Vditor.preview 统一渲染
- 完善 TypeScript 类型定义，提升开发体验

## [2.0.0] - 2025-12-08

### 新增
- 完全重构编辑器系统，采用纯净的 Markdown 编辑器
- 使用 @uiw/react-md-editor，提供 GitHub 风格的编辑体验
- 实时预览功能，支持编辑/预览模式切换

### 优化
- 完美支持 GitHub Flavored Markdown (GFM)
- 有序列表序号完美保持，无任何丢失问题
- 优化编辑器界面，提供快速插入工具栏

### 修复
- 修复日记展示页渲染问题，统一使用 @uiw/react-md-editor 渲染
- 支持表格、代码块、图片等复杂 Markdown 元素正确显示

### 移除
- 移除所有富文本编辑器，避免 HTML 代码冗余
- 改为纯文本存储，内容干净简洁

## [1.2.0] - 2025-12-08

### 新增
- 新增Quill.js编辑器支持（推荐⭐）
- 完善Quill编辑器测试套件

### 修复
- 完美解决TipTap编辑器有序列表序号丢失问题
- 支持自定义序号列表（包括非连续序号）
- 修复编辑器无限加载问题

### 更改
- Quill编辑器成为默认编辑器，生产就绪

## [1.1.2] - 2025-12-08

### 修复
- 修复XSS安全漏洞，添加输入清理机制
- 完善自动化测试框架，覆盖核心功能
- 添加安全性测试和边界值测试
- 修复模块类型警告和导入错误
- 新增图片上传专项测试

## [1.1.1] - 2025-12-08

### 修复
- 修复TipTap编辑器有序列表序号丢失问题
- 优化编辑器初始化逻辑，避免循环更新
- 改进Markdown与HTML转换，支持非连续序号保留
- 完善编辑器生命周期管理

## [1.1.0] - 2025-12-08

### 新增
- 解决MDX Editor转义问题
- 新增TipTap编辑器（默认）
- 支持三种编辑器选择

### 优化
- 实现真正的所见即所得编辑
- 优化编辑器性能和用户体验

## [1.0.0] - 2025-12-07

### 新增
- 完成所有计划功能
- 实现所见即所得编辑器
- 支持图片上传和展示
- 实现数据备份和导出
- 完成Docker部署配置
- 优化移动端体验

---

## 版本说明

- **主版本号（Major）**：不兼容的API修改
- **次版本号（Minor）**：向下兼容的功能性新增
- **修订号（Patch）**：向下兼容的问题修正

## 贡献指南

1. Fork 本项目
2. 创建您的特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交您的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启一个 Pull Request