● 日记应用自动化测试用例设计

  基于项目分析，我将制定以下测试用例：

  1. 功能测试用例

  1.1 日记CRUD操作

  - 创建日记
    - 正常创建（标题+内容）
    - 标题为空（应失败）
    - 标题超长（>100字符，应失败）
    - 内容为空（应失败）
    - 特殊字符输入
    - HTML/脚本注入测试
    - 仅标题和内容的边界值测试
  - 读取日记
    - 读取存在的日记
    - 读取不存在的ID
    - 无效ID格式
    - 数据为空时的情况
  - 更新日记
    - 部分更新（仅标题）
    - 部分更新（仅内容）
    - 全部更新
    - 更新不存在的日记
    - 更新为空内容
    - 并发更新测试
  - 删除日记
    - 正常删除
    - 删除不存在的日记
    - 重复删除
    - 删除后验证关联图片被清理

  1.2 图片上传功能

  - 格式支持测试
    - JPG/PNG/GIF/WebP正常上传
    - 非图片格式上传（应失败）
    - 无扩展名文件（应失败）
  - 大小限制测试
    - 正常大小图片（<5MB）
    - 超大图片（>5MB，应失败）
    - 空文件（0字节）
    - 接近限制的图片（4.9MB）
  - 上传方式测试
    - 点击上传
    - 拖拽上传
    - 粘贴上传（Ctrl+V）
    - 批量上传多张图片

  1.3 搜索功能

  - 基础搜索
    - 搜索存在的关键词
    - 搜索不存在的内容
    - 空搜索（返回所有）
    - 大小写不敏感验证
  - 高级搜索场景
    - 搜索标题中的词
    - 搜索内容中的词
    - 搜索特殊字符
    - 搜索HTML标签内容
    - 部分匹配搜索

  1.4 编辑器功能

  - TipTap编辑器
    - 所有格式化按钮功能
    - 撤销/重做功能
    - 列表功能（有序/无序）
    - 链接插入和编辑
    - 图片插入和删除
    - Markdown快捷键支持
    - 内容初始化和更新
  - 编辑器切换
    - 三种编辑器间切换
    - 切换后内容保留
    - 编辑器状态同步

  1.5 数据导出功能

  - JSON导出
    - 导出所有数据
    - 导出数据完整性
    - 导出数据格式正确性
  - Markdown导出
    - 导出格式正确性
    - 图片链接正确性
    - 特殊字符转义

  2. 容错测试用例

  2.1 网络异常

  - 网络中断时操作
  - API请求超时
  - 服务器错误响应（500/502/503）
  - 请求限流测试

  2.2 存储异常

  - 磁盘空间不足
  - 文件权限不足
  - 数据文件损坏
  - 并发文件写入

  2.3 浏览器异常

  - 内存限制测试
  - 页面刷新后状态保持
  - 浏览器后退/前进
  - 多标签页同步

  3. 性能测试用例

  3.1 加载性能

  - 大量日记加载（100+条）
  - 图片密集页面加载
  - 搜索响应时间
  - 编辑器初始化速度

  3.2 操作性能

  - 快速连续操作
  - 大文本编辑
  - 图片上传处理时间

  4. 安全测试用例

  4.1 XSS防护

  - 脚本注入尝试
  - HTML标签过滤
  - 事件处理器注入

  4.2 文件上传安全

  - 恶意文件上传
  - 文件名注入
  - MIME类型伪造